# 产品设计AI助手优化说明

## 本次优化内容（8项）

### 已完成的优化（前5项）

#### 1. 产品信息新增字段
- ✅ 添加"产品名称"输入框
- ✅ 添加"产品负责人"输入框
- ✅ 保存到session_state和product_features中

#### 2. 推荐流程步骤表格优化
- ✅ 添加表头（勾选、序号、步骤名称、步骤类型、负责部门、时长、风险、状态）
- ✅ 序号从1开始的顺序序列（不再使用step_order）

#### 3. 当前流程方案添加移除按钮
- ✅ 每行步骤添加🗑️移除按钮
- ✅ 点击后从当前方案中删除该步骤

#### 4. 保存方案名称格式优化
- ✅ 格式改为：<产品名称>_YYYYMMDD_HHMMSS
- ✅ 例如：易方达股票型基金1号_20251228_031216

#### 5. 已保存方案功能增强
- ✅ 添加"🔄 一键复用"按钮：复用方案到当前流程方案
- ✅ 添加"🗑️ 删除"按钮：删除已保存的方案

### 待实现的优化（后3项）

#### 6. 流程智能优化 - 遗漏步骤检测
需要在优化逻辑中添加：
- 检测是否遗漏关键步骤
- 提供遗漏步骤的优化提示

#### 7. 流程智能优化 - 具体化建议
需要优化建议更具体：
- 并行优化：明确指出哪几步可以并行
- 流程简化：明确指出哪个流程可以简化
- 所有建议都提供具体信息

#### 8. 优化process_optimizer.py
需要修改ProcessOptimizer类的optimize_process方法，使其生成更具体的优化建议。

## 技术实现要点

### 产品名称和负责人
```python
if 'product_name' not in st.session_state:
    st.session_state.product_name = ''
if 'product_manager' not in st.session_state:
    st.session_state.product_manager = ''
```

### 方案名称生成
```python
product_name_part = st.session_state.product_name if st.session_state.product_name else "未命名产品"
plan_name = f"{product_name_part}_{datetime.now().strftime('%Y%m%d_%H%M%S')}"
```

### 移除步骤
```python
if st.button("🗑️", key=f"remove_step_{idx}_{step['step_order']}", help="移除此步骤"):
    st.session_state.current_plan.pop(idx - 1)
    st.rerun()
```

### 一键复用
```python
if st.button("🔄 一键复用", key=f"reuse_plan_{i}"):
    st.session_state.current_plan = plan['steps'].copy()
    st.success(f"✅ 已复用方案：{plan['plan_name']}")
    st.rerun()
```

## 下一步工作

需要修改`process_optimizer.py`文件，增强优化建议的具体性：
1. 添加遗漏步骤检测逻辑
2. 并行优化建议中明确列出可并行的步骤
3. 流程简化建议中明确指出可简化的流程
4. 确保所有建议都包含具体的步骤名称和详细信息